var data=function(){"use strict";var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e=t;function t(n){return function(e){return e==n}}t.fn=function(n){return"function"==typeof n},t.str=function(n){return"string"==typeof n},t.num=function(n){return"number"==typeof n},t.obj=function(n){return"object"==typeof n},t.lit=function(n){return n.constructor==Object},t.bol=function(n){return"boolean"==typeof n},t.truthy=function(n){return 1==!!n},t.falsy=function(n){return 0==!!n},t.arr=function(n){return n instanceof Array},t.null=function(n){return null===n},t.def=function(n){return void 0!==n},t.in=function(n){return function(e){return!!n&&(n.indexOf?~n.indexOf(e):e in n)}},t.promise=function(n){return n instanceof Promise},t.stream=function(n){return!(!n||!n.next)};var r=function(n){return Object.keys(e.obj(n)||e.fn(n)?n:{})},o=function(n,e){return function(t){return e[t]=n[t],t}},u=function(n){return function(){return n}},i=function n(t,o){var i,a=arguments.length>1,f=e.fn(t)?[]:(i=t,0===i?"0":i?e.fn(i)?""+i:e.obj(i)?JSON.stringify(i):String(i):"").split(".").filter(Boolean),c=f.shift();return function(i,l){var s={};return i?e.num(t)||t?e.arr(t)?(t.map(function(t){var r=n(t)(i);null!=(r=e.fn(o)?o(r):null==r?o:r)&&n(t,e.fn(r)?u(r):r)(s)}),s):i[t]||!f.length?a?(i[t]=e.fn(o)?o(i[t],l):o,i):e.fn(t)?t(i):i[t]:a?(n(f.join("."),o)(i[c]?i[c]:i[c]={}),i):n(f.join("."))(i[c]):a?function(n,e){return r(n).map(function(e){delete n[e]}),r(e).map(function(t){n[t]=e[t]}),n}(i,o):i:void 0}},a=function(n){return function(){return!n.apply(this,arguments)}},f=function n(t){return function(r){for(x in r)e.obj(r[x])&&e.obj(t[x])?n(t[x])(r[x]):t[x]=r[x];return t}};var c=function(){var n,e,t=new Promise(function(t,r){n=t,e=r});return arguments.length&&n(arguments[0]),t.resolve=n,t.reject=e,t};var l=function n(e,t){return t instanceof Array&&(t=t.reduce(n,[])),(e=e||[]).concat(t)},s=function(n,e,t,r){return n.host&&n.host.nodeName&&(n=n.host),e.name&&(t=e,e=e.name),!function(n,e){return e in n}(n,e)&&Object.defineProperty(n,e,{value:t,writable:r}),n[e]},d=function(){},p={add:function(n,t,r){e.arr(n)?n.splice(t,0,r):n[t]=r},update:function(n,t,r){if(e.num(t)||t)n[t]=r;else{if(!e.obj(r))return!0;for(var o in n)delete n[o];for(var o in r)n[o]=r[o]}},remove:function(n,t){e.arr(n)?n.splice(t,1):delete n[t]}},h=JSON.stringify,y=JSON.parse,m=function(n,t){return function(r,o,u){if(!e.obj(r)&&!e.fn(r))return r;if(!e.obj(n)){var i=o||r.log||[],a=r;if(e.def(u)||(u=i.max||0),u||(i=[]),u<0&&(i=i.concat(null)),u>0){var f=h(r);a=y(f),i=i.concat({type:"update",value:y(f),time:i.length})}return s(i,"max",u),a.log?a.log=i:s(function n(e,t){return t=t||{},s(e=e||{},"emit",function(n,t,o){for(var u=e.on[n.split(".")[0]]||[],i=[],a=0;a<u.length;a++)u[a].ns&&o&&!o(u[a].ns)||i.push(r(u[a].isOnce?u.splice(a--,1)[0]:u[a],t));for(var a=0;a<e.on["*"].length;a++)i.push(r(e.on["*"][a],[n,t]));return i.reduce(l,[])},1),s(e,"once",function(n,t){return e.on(n,t,!0)},1),s(e,"off",function(n,t){return o(e.on[n]||[],t),t&&t.ns&&delete e.on[n]["$"+t.ns],e},1),s(e,"on",function(n,r,i){var a=n.split(".")[0],f=n.split(".")[1],c=e.on[a]=e.on[a]||[],l="function"==typeof r?r:0;return!l&&f?(l=e.on[a]["$"+f])?l:s(u(e,r)):l||f?l&&f?s((o(c,e.on[a]["$"+f]||-1),l)):!(!l||f)&&s(l):s(u(e,r));function s(n){return n.isOnce=i,n.type=a,f&&(e.on[a]["$"+(n.ns=f)]=n),c.push(n),(t.on||d)(n),n.next?n:e}},1),e.on["*"]=e.on["*"]||[],e;function r(n,t){return n.next?n.next(t):t instanceof Array?n.apply(e,t):n.call(e,t)}function o(n,e){for(var r=n.length;~--r;)e!=n[r]&&e!=n[r].fn&&e||(t.off||d)(n.splice(r,1)[0])}function u(e,t){var r=n((t=t||{}).base||c());return r.i=0,r.li=[],r.fn=t.fn,r.parent=e,r.source=t.fn?r.parent.source:r,r.on("stop",function(n){return r.type?r.parent.off(r.type,r):r.parent.off(r),r.reason=n}),r.each=function(n){var e=n.next?n:u(r,{fn:n});return r.li.push(e),e},r.pipe=function(n){return n(r)},r.map=function(n){return r.each(function(e,t,r){return r.next(n(e,t,r))})},r.filter=function(n){return r.each(function(e,t,r){return n(e,t,r)&&r.next(e)})},r.reduce=function(n,e){return r.each(function(t,r,o){return o.next(e=n(e,t,r,o))})},r.unpromise=function(){var n=u(r,{base:{},fn:function(e){return n.next(e)}});return r.li.push(n),n},r.next=function(n){return r.resolve&&r.resolve(n),r.li.length?r.li.map(function(e){return e.fn(n,e.i++,e)}):n},r.until=function(n){return(n.each||n.then).call(n,function(n){return r.source.emit("stop",n)}),r},r.off=function(n){return o(r.li,n),r},r.start=function(){return r.source.emit("start"),r},r[Symbol.asyncIterator]=function(){return{next:function(){return r.wait=new Promise(function(n){r.wait=!0,r.map(function(e,t,o){delete r.wait,r.off(o),n({value:e,done:!1})}),r.emit("pull",r)})}}},r}}(a,null),"log",i,1),a}return!!e.def(n.key)&&(!!function n(e,t,r,o){var u=r.shift();if(!p[t])return!1;if(r.length){if(!(u in e)){if("remove"==t)return!0;e[u]={}}return n(e[u],t,r,o)}return!p[t](e,u,o)}(r,n.type,(n.key=""+n.key).split(".").filter(Boolean),n.value)&&(r.log&&r.log.max&&r.log.push((n.time=r.log.length,r.log.max>0?n:null)),!t&&r.emit&&r.emit("change",n),r))}};var g={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(n){var t="id";return 1==arguments.length?(t=n,r):r.apply(this,arguments);function r(n,r,o){return 0===o&&(n={}),n[e.fn(t)?t(r,o):r[t]]=r,n}}};var v,b="undefined"!=typeof window?window:n,j=(v="[ri/types/data]",function(n){if(!b.console||!console.log.apply)return n;e.arr(arguments[2])&&(arguments[2]=arguments[2].length);var t=g.arr(arguments),r="[log]["+(new Date).toISOString()+"]"+v;return t.unshift(r.grey?r.grey:r),console.log.apply(console,t),n}),w=i("body.on");return function(n){return j("creating"),n.on("change.data").filter(function(e){var t=e[0];return e[1],function(n,e){var t=1==arguments.length;return function(r){return r&&r.headers?t?i(n)(r.headers):i(n)(r.headers)==e:null}}("content-type","application/data")(n.resources[t])}).filter(function(n){n[0];var e=n[1];return e&&e.key}).map(function(t){var r=t[0],o=t[1];return n.resources[r].body.emit("change",o||null,a(e.in(["bubble"])))}),n.types["application/data"]={header:"application/data",ext:"*.data.js",selector:function(n){return'[data~="'+n.name+'"]'},extract:function(n){return(function n(t,r){var o=arguments.length;return e.str(t)||2!=o?e.str(t)||3!=o?function(n){var u=this||{};return n=(n=(n=u.nodeName||e.fn(u.node)?u:n).node?n.node():n).host||n,o>1&&!1===r?n.removeAttribute(t):o>1?(n.setAttribute(t,r),r):n.attributes.getNamedItem(t)&&n.attributes.getNamedItem(t).value}:n(arguments[1],arguments[2]).call(this,arguments[0]):n(arguments[1]).call(this,arguments[0])}("data")(n)||"").split(" ")},check:function(n){return e.obj(n.body)},load:function(t){var r=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}(t.headers.path);return r=r.default||r,r=e.fn(r)?r(n):r,t.headers["content-type"]=this.header,n(f(t)(r)),n.resources[t.name]},parse:function(t){var u,i=n.resources[t.name]||{};return(u=t.headers,function(n){return r(n).filter(a(e.in(u))).map(o(n,u)),u})(i.headers),t.body=m()(t.body||[],i.body&&i.body.log,e.num(t.headers.log)?t.headers.log:-1),function(n){return function(e){return r(e).map(o(e,n)),n}}(t.body.on)(w(i)),t.body.on("change.bubble",function(r){n.emit("change",n.change=[t.name,r],a(e.in(["data"]))),delete n.change}),t.headers.loaded&&!t.headers.loading&&(t.headers.loading=Promise.resolve(t.headers.loaded(n,t)).then(function(){return delete t.headers.loading,t})),t}},n}}();
